---
layout: archive
permalink: /node-operator/
title: ""
author_profile: false
header:
  image: "/images/coda4.jpg"
---

# Станьте оператором ноды

<Alert kind="danger">
  
  Команды для управления ноды все еще доводятся до стабильного состояния поэтому в будущем могут измениться. Если вы обнаружили ошибки не стесняйтесь исправлять их, открывайте запросы на исправление (pull request) в [репозитории](https://github.com/CodaProtocol/coda) разработчиков Coda!

</Alert>

Итак, мы уже настроили нашу ноду Coda и отправили первую транзакцию, давайте рассмотрим другие способы взаимодействия с сетью Coda, а именно участие в консенсусе и помощь в сжатии данных путем создания zk-SNARKs. Управляя узлом, который помогает защитить сеть, вы можете получить coda за ваши усилия.

## Участие в консенсусе

Сеть Coda защищена алгоритмом консенсуса [Proof-of-Stake (подтверждение доли)](https://codaprotocol.com/docs/glossary#proof-of-stake). С этой моделью консенсуса вам не нужно иметь дорогое оборудование, как при майнинге биткойнов. Просто имея в своем кошельке coda (доля необходимая для запуска ноды), мы можем либо держать запущенной свою ноду, либо делегировать долю другому узлу. Давайте сначала рассмотрим как запутить свою ноду:

### Staking coda

<!-- Так как в нашем кошельке уже есть coda из [предыдущего шага](/coda-rus/my-first-transaction/), мы можем настроить этот кошелек для размещения(staking) coda, введя следующую команду, передав путь к файлу для соответствующего закрытого ключа (ранее мы создали пару ключей `keys/my-wallet`): -->

<!-- coda client set-staking -privkey-path keys/my-wallet -->

Так как мы уже имеем средства в нашем кошельке из [предыдущего шага](/coda-rus/my-first-transaction), мы можем запустить демон с флагом `-propose-key`, чтобы начать размещать(staking) coda. Давайте остановим наш текущий процесс демона и перезапустим его с помощью следующей команды, передавая путь к файлу для соответствующего закрытого ключа (ранее мы создали пару ключей `keys/my-wallet`):

    coda daemon \
        -discovery-port 8303 \
        -peer /dns4/seed-one.genesis.o1test.net/tcp/10002/ipfs/12D3KooWP7fTKbyiUcYJGajQDpCFo2rDexgTHFJTxCH8jvcL1eAH \
        -peer /dns4/seed-two.genesis.o1test.net/tcp/10002/ipfs/12D3KooWL9ywbiXNfMBqnUKHSB1Q1BaHFNUzppu6JLMVn9TTPFSA \
        -propose-key keys/my-wallet
        
<Alert>
  
  Вы можете предоставить список файлов c ключами, для того чтобы включить staking для нескольких кошельков одновременно.

</Alert>

Мы всегда можем проверить с какими кошельками в данный момент делаем staking, используя команду `coda client status`:

    coda client status
    
    Coda Daemon Status 
    -----------------------------------
    
    Global number of accounts:                     10045
    Block height:                                  249
    Max observed block length:                     249
    Local Uptime:                                  36s
    Ledger Merkle Root:                            ...
    Staged-ledger Hash:                            ...
    Staged Hash:                                   ...
    GIT SHA1:                                      ...
    Configuration Directory:                       ...
    Peers:                                         ...
    User_commands Sent:                            0
    SNARK worker:                                  None
    SNARK work fee:                                1
    Sync Status:                                   Offline
    Block producers running:                       Total: 1 (4vsRCVzBeSxp3iBQ1C3ahHyKjKVbPd93JLSAsqtRtmjB9Xhn29NBdnzT4o6Hb3iNwaFECrh18YsxhAkqMY8nZQrN8jRX5LfbB9h4p5csrRe8xza4VWToXnFaHtGx6gB9FKAr1eKebSiPyH5c)
    Best tip consensus time:                       epoch=6, slot=88
    Next proposal:                                 None this epoch…
    Consensus time now:                            epoch=6, slot=93
    Consensus Mechanism:                           proof_of_stake
    ...

Поле `Block producers running` в выводе команды, число аккаунтов которые в данный момент выполняют staking, в скобках связанный с аккаунтом открытый ключ.

<Alert kind="warning">

  Обратите внимание, что если вы выполняте staking независимо от средств в кошельке, вам необходимо всегда оставаться подключенным к сети, чтобы быть избранным производителем блоков. Если вы часто бываете вне сети, возможно, лучше делегировать свою долю.

</Alert>

### Делегирование coda

Делегирование coda это альтернатива самостоятельному staking, с тем преимуществом, что вам уже не нужно постоянно оставаться подключенным к сети. Однако имейте в виду, что:  

- чтобы внести изменение делегата, вам нужно будет заплатить небольшую комиссию за транзакцию, так как это изменение записывается в блокчейне как транзакция

- делегат, делающий staking для вас, может принять решение взимать с вас комиссию за предоставление услуги staking

Вместо того чтобы запустить свою ноду и делегировать свою долю запустите команду:

    coda client delegate-stake \
        -delegate <delegate-public-key> \
        -privkey-path <file> \
        -fee <fee>
        

Поля в этой команде:

- `delegate` - флаг которому нужно передать открытый ключ выбронного вами делегата
- `privkey-path` - путь к файлу закрытого ключа в котором хранятся ваши средства которые вы хотите делегировать
- `fee` - комиссия за транзакцию которая будет записана в блокчейне

Делегирование вашей доли может быть полезна, если вы заинтересованы в:

- Запуске собственной staking ноды , которая использует средства из «холодного кошелька»
- Делегирование в "staking пул", который будет периодически выплачивать вам монеты coda

<Alert>

  Перед вступлением в силу этого изменения существует один день ожидания для предотвращения злоупотреблений сетью.

</Alert>

## Сжатие данных в сети Coda

Протокол Coda уникален тем, что ему не требуется, чтобы узлы поддерживали полную историю блокчейна, как другие криптовалютные протоколы (биткоин, эфириум). Благодаря рекурсивному использованию криптографических доказательств протокол Coda эффективно сжимает блокчейн до постоянного размера. Мы называем это сжатие, потому что оно уменьшает терабайты данных до нескольких килобайт.

Однако это не кодирование или сжатие данных в традиционном смысле - скорее узлы "сжимают" данные в сети, генерируя криптографические доказательства. Узловые операторы играют решающую роль в этом процессе, определяя себя как "ловких работников" (**snark workers**), которые генерируют zk-SNARKs для транзакций, которые были добавлены в блоки.

Когда вы [запускаете демон](/coda-rus/my-first-transaction/#start-up-a-node), задайте эти дополнительные аргументы, чтобы также запустить snark-worker:

    coda daemon \
        -discovery-port 8303 \
        -peer /dns4/peer1-rising-phoenix.o1test.net/tcp/8303/ipfs/12D3KooWHMmfuS9DmmK9eH4GC31arDhbtHEBQzX6PwPtQftxzwJs \
        -peer /dns4/peer2-rising-phoenix.o1test.net/tcp/8303/ipfs/12D3KooWAux9MAW1yAdD8gsDbYHmgVjRvdfYkpkfX7AnyGvQaRPF \
        -peer /dns4/peer3-rising-phoenix.o1test.net/tcp/8303/ipfs/12D3KooWCZA4pPWmDAkQf6riDQ3XMRN5k99tCsiRhBAPZCkA8re7 \
        -run-snark-worker $CODA_PK \
        -snark-worker-fee <fee>
        
Как snark worker, вы получаете часть вознаграждения за каждый блок в который попадают ваши сжатые транзакции. Производитель блоков отвечает за сбор сжатых транзакций перед их включением в блок и будет стимулироваться протоколом, чтобы вознаградить snark-workers.

Это касается ролей и обязанностей оператора ноды coda. Поскольку Coda - это одноранговая сеть без прав доступа (все узлы равны), все децентрализованно управляется узлами по всему миру. В свою очередь проект Coda распространяется точно также. Исходный код проекта полностью открыт, и еще предстоит проделать огромную работу во всех направляниях. Чтобы узнать больше о том, как вы можете принять участие в Coda, пожалуйста, ознакомьтесь с разделом [Содействие Coda](https://codaprotocol.com/docs/contributing).
